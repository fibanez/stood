#!/bin/bash
# Docker setup guide for AWS Documentation MCP Server with Stood (NEW Simple Method)
set -e

echo "üê≥ AWS Documentation MCP Server Docker Setup Guide (NEW Simple Method)"
echo "======================================================================"
echo ""
echo "This example demonstrates the NEW simple MCP integration using with_mcp_client()!"
echo ""
echo "‚ùó IMPORTANT: The pre-built Docker image is not available in Docker Hub."
echo "   You need to build the Docker image from source first."
echo ""
echo "üìã Manual Setup Steps Required:"
echo ""
echo "1Ô∏è‚É£  Clone the MCP repository:"
echo "   git clone https://github.com/awslabs/mcp.git"
echo ""
echo "2Ô∏è‚É£  Navigate to the AWS Documentation MCP server directory:"
echo "   cd mcp/src/aws-documentation-mcp-server/"
echo ""
echo "3Ô∏è‚É£  Build the Docker image:"
echo "   docker build -t awslabs/aws-documentation-mcp-server ."
echo ""
echo "4Ô∏è‚É£  Verify the image was built successfully:"
echo "   docker images | grep awslabs/aws-documentation-mcp-server"
echo ""
echo "5Ô∏è‚É£  Return to this directory and run the example:"
echo "   cd examples/022_aws_doc_mcp"
echo "   cargo run --example 022_aws_doc_mcp"
echo ""
echo "‚ö†Ô∏è  Note: Building the Docker image may take several minutes depending on"
echo "   your internet connection and system performance."
echo ""
echo "üîç To check if you already have the image built:"
if docker images | grep -q awslabs/aws-documentation-mcp-server; then
    echo "‚úÖ Found existing Docker image:"
    docker images | grep awslabs/aws-documentation-mcp-server
    echo ""
    echo "üöÄ You can now run: cargo run --example 022_aws_doc_mcp"
else
    echo "‚ùå Docker image not found. Please follow the build steps above."
fi
echo ""
echo "üí° After building the image, the NEW Stood example will:"
echo "   ‚úÖ Start the MCP server automatically using Docker"
echo "   ‚úÖ Verify MCP tools work directly"
echo "   ‚úÖ Create an agent using the simple with_mcp_client() method"
echo "   ‚úÖ Demonstrate AWS documentation queries with tool verification"
echo ""
echo "üìö The server provides access to AWS documentation for CloudFormation, DynamoDB, SDKs, and more"
echo "üéØ Watch for 'SUCCESS: AWS Documentation MCP tools were called!' messages"